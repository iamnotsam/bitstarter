/* ==========================================================
  1. Plugins Combined
*/// Respond.js v1.1.0: min/max-width media query polyfill. (c) Scott Jehl. MIT/GPLv2 Lic. j.mp/respondjs
(function(e){function S(){b(!0)}e.respond={};respond.update=function(){};respond.mediaQueriesSupported=e.matchMedia&&e.matchMedia("only all").matches;if(respond.mediaQueriesSupported)return;var t=e.document,n=t.documentElement,r=[],i=[],s=[],o={},u=30,a=t.getElementsByTagName("head")[0]||n,f=t.getElementsByTagName("base")[0],l=a.getElementsByTagName("link"),c=[],h=function(){var t=l,n=t.length,r=0,i,s,u,a;for(;r<n;r++){i=t[r],s=i.href,u=i.media,a=i.rel&&i.rel.toLowerCase()==="stylesheet";if(!!s&&a&&!o[s])if(i.styleSheet&&i.styleSheet.rawCssText){d(i.styleSheet.rawCssText,s,u);o[s]=!0}else(!/^([a-zA-Z:]*\/\/)/.test(s)&&!f||s.replace(RegExp.$1,"").split("/")[0]===e.location.host)&&c.push({href:s,media:u})}p()},p=function(){if(c.length){var e=c.shift();w(e.href,function(t){d(t,e.href,e.media);o[e.href]=!0;p()})}},d=function(e,t,n){var s=e.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),o=s&&s.length||0,t=t.substring(0,t.lastIndexOf("/")),u=function(e){return e.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+t+"$2$3")},a=!o&&n,f=0,l,c,h,p,d;t.length&&(t+="/");a&&(o=1);for(;f<o;f++){l=0;if(a){c=n;i.push(u(e))}else{c=s[f].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1;i.push(RegExp.$2&&u(RegExp.$2))}p=c.split(",");d=p.length;for(;l<d;l++){h=p[l];r.push({media:h.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&RegExp.$2||"all",rules:i.length-1,hasquery:h.indexOf("(")>-1,minw:h.match(/\(min\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:h.match(/\(max\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}}b()},v,m,g=function(){var e,r=t.createElement("div"),i=t.body,s=!1;r.style.cssText="position:absolute;font-size:1em;width:1em";if(!i){i=s=t.createElement("body");i.style.background="none"}i.appendChild(r);n.insertBefore(i,n.firstChild);e=r.offsetWidth;s?n.removeChild(i):i.removeChild(r);e=y=parseFloat(e);return e},y,b=function(e){var o="clientWidth",f=n[o],c=t.compatMode==="CSS1Compat"&&f||t.body[o]||f,h={},p=l[l.length-1],d=(new Date).getTime();if(e&&v&&d-v<u){clearTimeout(m);m=setTimeout(b,u);return}v=d;for(var w in r){var E=r[w],S=E.minw,x=E.maxw,T=S===null,N=x===null,C="em";!S||(S=parseFloat(S)*(S.indexOf(C)>-1?y||g():1));!x||(x=parseFloat(x)*(x.indexOf(C)>-1?y||g():1));if(!E.hasquery||(!T||!N)&&(T||c>=S)&&(N||c<=x)){h[E.media]||(h[E.media]=[]);h[E.media].push(i[E.rules])}}for(var w in s)s[w]&&s[w].parentNode===a&&a.removeChild(s[w]);for(var w in h){var L=t.createElement("style"),A=h[w].join("\n");L.type="text/css";L.media=w;a.insertBefore(L,p.nextSibling);L.styleSheet?L.styleSheet.cssText=A:L.appendChild(t.createTextNode(A));s.push(L)}},w=function(e,t){var n=E();if(!n)return;n.open("GET",e,!0);n.onreadystatechange=function(){if(n.readyState!=4||n.status!=200&&n.status!=304)return;t(n.responseText)};if(n.readyState==4)return;n.send(null)},E=function(){var e=!1;try{e=new XMLHttpRequest}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}return function(){return e}}();h();respond.update=h;e.addEventListener?e.addEventListener("resize",S,!1):e.attachEvent&&e.attachEvent("onresize",S)})(this);var mainPage,position=0;$(document).ready(function(){$("html").addClass("home");document.body.style["-webkit-mask-repeat"]!==undefined?$("html").addClass("cssmasks"):$("html").addClass("no-cssmasks");var e=0;$(".footer-logo").on("click",function(){$("html,body").animate({scrollTop:0},1e3)});$("a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")||location.hostname==this.hostname){var t=$(this.hash),n=Math.floor($(document).scrollTop());t=t.length?t:$("[name="+this.hash.slice(1)+"]");t.length&&Math.abs(e-n)>2&&$("html,body").animate({scrollTop:t.offset().top},1e3);e=n;return!1}});$("html").removeClass("no-js").addClass("js");var t={},n=function(e,t,n){return{espresso:{range:e},milk:{range:t},froth:{range:n}}},r={espresso:n(2,0,0,"test"),cortado:n(2,2,"SOME","test"),latte:n(2,[5,6],"SOME","test"),macchiato:n(2,0,"SOME","test"),cappuccino:n(2,2,[1,2],"test")},i=function(e){var t=document.head.appendChild(e).sheet;return function(e,n){var r=Object.keys(n).map(function(e){return e+":"+n[e]}).join(";");t.insertRule(e+"{"+r+"}",t.cssRules.length)}},s=i(document.createElement("style")),o=i(document.createElement("style")),u=$(".drink-layer"),a=$("#highlight"),f=$(".header"),l=$(".coffee-cherries").height(),c=$("#ingredients"),h=$("#espresso"),p=$("#milk"),d=$("#froth"),v=$("#espresso-key"),m=$("#milk-key"),g=$("#froth-key"),y=$("#total-key"),b=$("#espresso-key").find(".range"),w=$("#milk-key").find(".range"),E=$("#froth-key").find(".range"),S=$("#total-key").find(".range"),x=$("#highlight img"),T=$("#espresso-drink-guide"),N=$(".espresso-description h2"),C=$(".espresso-description p"),k=$("#espresso-drink-guide li"),L=$("#espresso-drink-guide ul a"),A=undefined,O="current";$.extend(t,{init:function(){Socialite.load($("#socialite"));this.monitorSocialiteButtons();this.initDrinks();$(".current").click()},initDrinks:function(){L.on("click",function(){var e=$(this).parent(),n=$(this).attr("data-name");k.removeClass(O);e.addClass(O);T.removeClass().addClass(n);t.adjustDrinkSelection(e,n)})},adjustDrinkSelection:function(e,t){var n=e.position(),i=e.width(),u=r[t];a.css("left",n.left);a.css("width",i);setTimeout(function(){var e=i/2+"px solid transparent";s("#highlight:after",{"border-left":e,"border-right":e})},100);var f=u.espresso.range,l=u.milk.range,c=u.froth.range,v=this.getIngredientHeight(u.espresso.range),m=this.getIngredientHeight(u.milk.range),g=this.getIngredientHeight(u.froth.range);T.attr({"data-drink":t,"data-espresso-factor":v,"data-milk-factor":m,"data-froth-factor":g});var y=15,x=v*y,N=m*y,C=g*y,k=position,L=Math.random();h.attr("data-volume",x).css("height",x);p.attr("data-volume",N).css("height",N);d.attr("data-volume",C).css("height",C);position=Math.abs(position+(L<.5?1:-1)*Math.max(30,200*L));h.css({"background-position-y":N+C===0?"100px":0,"background-position-x":k+"px"});o("#froth:after",{"background-position-x":-position%1e3+"px"});b.html(this.formatWithRange(f));w.html(this.formatWithRange(l));E.html(this.formatWithRange(c));S.html(this.formatTotal([f,l,c]))},formatTotal:function(e){var t=[0,0];$.map(e,function(e,n){if(isNaN(e[1])){isNaN(e)&&(e=0);t=[t[0]+e,t[1]+e]}else t=[t[0]+e[0],t[1]+e[1]]});return this.formatWithRange(t)},formatWithRange:function(e){var t="OZ";if(isNaN(e[1]))return isNaN(e)?e:e+" "+t;if(e[0]!==e[1])return e[0]+"-"+e[1]+" "+t;if(e[0]===e[1])return e[0]+" "+t},getIngredientHeight:function(e){return isNaN(e[0])?isNaN(e)?.5:e:e[0]},monitorSocialiteButtons:function(){var e,n=!1,r=$("#socialite li"),i=function(){if(-1===$.inArray(0,$.map(r,function(e,t){return $(e).width()})))if(n===!0){clearInterval(e);t.centerSocialiteButtons()}else n=!0};e=setInterval(i,1e3)},centerSocialiteButtons:function(){var e=0;$.map($("#socialite li"),function(t,n){e+=$(t).width()});$("#socialite").css("width",e)}});t.init()});